"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{1396:(e,t,r)=>{r.d(t,{Ey:()=>o,UD:()=>a,Xy:()=>s,at:()=>l,g3:()=>u,gY:()=>c,mF:()=>i});var n=r(6429);function s(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r="easy"===e?[2,8]:"medium"===e?[2,12]:[2,20],s=Math.floor(Math.random()*(r[1]-r[0]+1))+r[0];if(t){let t=Math.floor(Math.random()*("easy"===e?2*s:"medium"===e?3*s:4*s))+1;return new n.A(t,s)}{let e=Math.floor(Math.random()*(s-1))+1;return new n.A(e,s)}}let i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=Math.floor(Math.random()*e)+2,r=Math.floor(Math.random()*(t-1))+1;return new n.A(r,t)},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=Math.floor(Math.random()*t)+2,s=r+Math.floor(Math.random()*e);return new n.A(s,r)},o=e=>{let t=Number(e.n),r=Number(e.d);if(1===r)return t.toString();if(Math.abs(t)<r)return"".concat(t,"/").concat(r);let n=Math.floor(Math.abs(t)/r),s=Math.abs(t)%r,i=t<0?"-":"";return 0===s?"".concat(i).concat(n):"".concat(i).concat(n," ").concat(s,"/").concat(r)},l=e=>{try{let t=e.trim();if(/^\d+$/.test(t))return new n.A(parseInt(t));if(/^\d+\/\d+$/.test(t))return new n.A(t);let r=t.match(/^(\d+)\s+(\d+)\/(\d+)$/);if(r){let e=parseInt(r[1]),t=parseInt(r[2]),s=parseInt(r[3]);return new n.A(e).add(new n.A(t,s))}let s=t.match(/^-(\d+)\s+(\d+)\/(\d+)$/);if(s){let e=parseInt(s[1]),t=parseInt(s[2]),r=parseInt(s[3]);return new n.A(e).add(new n.A(t,r)).mul(-1)}return null}catch(e){return null}},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=new Set([o(e)]);for(;r.size<t;){let t,i=Math.random();if(i<.3){let r=.5>Math.random()?1:-1,s=Number(e.n),i=Number(e.d);t=new n.A(s+r,i)}else if(i<.6){let r=.5>Math.random()?1:-1,s=Number(e.n),i=Number(e.d);t=new n.A(s,Math.max(1,i+r))}else t=s("medium",!0);t.compare(0)>0&&!t.equals(e)&&r.add(o(t))}return Array.from(r).sort(()=>Math.random()-.5)},u=(e,t)=>{let r=l(e),n=l(t);return!!r&&!!n&&r.equals(n)}},2056:(e,t,r)=>{r.d(t,{O:()=>s,b:()=>n});let n={save:e=>{try{localStorage.setItem("mathquiz_user_preferences",JSON.stringify({...e,lastUpdated:new Date().toISOString()}))}catch(e){console.error("Failed to save user preferences:",e)}},load:()=>{try{let e=localStorage.getItem("mathquiz_user_preferences");if(!e)return null;let t=JSON.parse(e);return{...t,lastUpdated:new Date(t.lastUpdated)}}catch(e){return console.error("Failed to load user preferences:",e),null}},clear:()=>{try{localStorage.removeItem("mathquiz_user_preferences")}catch(e){console.error("Failed to clear user preferences:",e)}}},s={save:e=>{try{let t={...e,id:"game_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),completedAt:new Date},r=s.loadAll(),n=[t,...r].slice(0,100);return localStorage.setItem("mathquiz_game_history",JSON.stringify(n)),t}catch(e){throw console.error("Failed to save game result:",e),e}},loadAll:()=>{try{let e=localStorage.getItem("mathquiz_game_history");if(!e)return[];return JSON.parse(e).map(e=>({...e,completedAt:new Date(e.completedAt)}))}catch(e){return console.error("Failed to load game history:",e),[]}},loadByUser:e=>{try{return s.loadAll().filter(t=>t.username.toLowerCase()===e.toLowerCase())}catch(e){return console.error("Failed to load user game history:",e),[]}},clear:()=>{try{localStorage.removeItem("mathquiz_game_history")}catch(e){console.error("Failed to clear game history:",e)}},clearByUser:e=>{try{let t=s.loadAll().filter(t=>t.username.toLowerCase()!==e.toLowerCase());localStorage.setItem("mathquiz_game_history",JSON.stringify(t))}catch(e){console.error("Failed to clear user game history:",e)}}}},2745:(e,t,r)=>{r.d(t,{al:()=>s});var n=r(2115);let s=()=>{let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}},4223:(e,t,r)=>{r.d(t,{T:()=>s});var n=r(5155);r(2115);let s=e=>{let{variant:t="primary",size:r="md",fullWidth:s=!1,icon:i,children:a,onClick:o,disabled:l=!1,className:c=""}=e;return(0,n.jsxs)("button",{onClick:o,disabled:l,className:"".concat("font-semibold rounded-xl transition-all duration-200 active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 cursor-pointer"," ").concat({sm:"min-h-[44px] px-4 py-2 text-sm",md:"min-h-[56px] px-6 py-3 text-base",lg:"min-h-[72px] px-8 py-4 text-lg"}[r]," ").concat({primary:"bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 text-white shadow-lg hover:shadow-xl hover:from-blue-600 hover:to-purple-700 dark:hover:from-blue-700 dark:hover:to-purple-800 hover:transform hover:scale-105",secondary:"bg-gray-100 dark:bg-slate-700 text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-slate-600 hover:bg-gray-200 dark:hover:bg-slate-600 hover:transform hover:scale-105",tile:"bg-white dark:bg-slate-800 text-gray-800 dark:text-gray-200 border-2 border-gray-200 dark:border-slate-600 hover:border-gray-300 dark:hover:border-slate-500 hover:bg-gray-50 dark:hover:bg-slate-700 shadow-sm hover:transform hover:scale-105",ghost:"bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 hover:transform hover:scale-105"}[t]," ").concat(s?"w-full":""," ").concat(c),children:[i&&(0,n.jsx)("span",{children:i}),(0,n.jsx)("span",{children:a})]})}},6066:(e,t,r)=>{r.d(t,{e:()=>c});var n=r(5453),s=r(1396),i=r(2056),a=r(8095),o=r(7488);let l={username:"",difficulty:"easy",numberOfQuestions:5,timerPerQuestion:10,questionType:"expression",mathOperations:["addition"],numberTypes:["integers"],timerEnabled:!0,questionsEnabled:!0,minCorrectAnswers:0,maxCorrectAnswers:5,correctAnswersEnabled:!1,minIncorrectAnswers:0,maxIncorrectAnswers:5,incorrectAnswersEnabled:!1,overallTimerEnabled:!1,overallTimerDuration:180,challengeMode:void 0},c=(0,n.v)((e,t)=>({_gameRecordSaved:!1,settings:l,questions:[],currentQuestionIndex:0,timeRemaining:l.timerPerQuestion,isQuizActive:!1,isQuizCompleted:!1,currentStreak:0,bestStreak:0,correctAnswersCount:0,incorrectAnswersCount:0,quizStartTime:null,overallTimeRemaining:l.overallTimerDuration,overallTimerActive:!1,updateSettings:t=>e(e=>({settings:{...e.settings,...t}})),setQuestions:t=>e({questions:t,currentQuestionIndex:0}),startQuiz:()=>e(e=>({isQuizActive:!0,isQuizCompleted:!1,currentQuestionIndex:0,timeRemaining:e.settings.timerEnabled?e.settings.timerPerQuestion:0,correctAnswersCount:0,incorrectAnswersCount:0,quizStartTime:Date.now(),overallTimeRemaining:e.settings.overallTimerEnabled?e.settings.overallTimerDuration:0,overallTimerActive:e.settings.overallTimerEnabled,_gameRecordSaved:!1})),nextQuestion:()=>e(e=>{let t=e.currentQuestionIndex+1,r=t>=e.questions.length,n=e.settings.correctAnswersEnabled&&e.correctAnswersCount>=e.settings.maxCorrectAnswers,s=e.settings.incorrectAnswersEnabled&&e.incorrectAnswersCount>=e.settings.maxIncorrectAnswers,i=r||n||s;return{currentQuestionIndex:t,timeRemaining:i?0:e.settings.timerEnabled?e.settings.timerPerQuestion:0,isQuizCompleted:i,isQuizActive:!i}}),submitAnswer:t=>e(e=>{let r=[...e.questions],n=r[e.currentQuestionIndex];if(n){n.userAnswer=t,n.isCorrect=.01>Math.abs(n.answer-t),n.timeSpent=e.settings.timerEnabled?e.settings.timerPerQuestion-e.timeRemaining:0;let s=n.isCorrect?e.currentStreak+1:0,i=Math.max(e.bestStreak,s);return{questions:r,currentStreak:s,bestStreak:i,correctAnswersCount:n.isCorrect?e.correctAnswersCount+1:e.correctAnswersCount,incorrectAnswersCount:n.isCorrect?e.incorrectAnswersCount:e.incorrectAnswersCount+1}}return{questions:r}}),submitFractionAnswer:t=>e(e=>{let r=[...e.questions],n=r[e.currentQuestionIndex];if(n){if(n.userFractionAnswer=t,n.fractionAnswer)n.isCorrect=(0,s.g3)(t,n.fractionAnswer);else{let e=(0,s.at)(t),r=e?Number(e.valueOf()):0;n.isCorrect=.01>Math.abs(n.answer-r)}n.timeSpent=e.settings.timerEnabled?e.settings.timerPerQuestion-e.timeRemaining:0;let i=n.isCorrect?e.currentStreak+1:0,a=Math.max(e.bestStreak,i);return{questions:r,currentStreak:i,bestStreak:a,correctAnswersCount:n.isCorrect?e.correctAnswersCount+1:e.correctAnswersCount,incorrectAnswersCount:n.isCorrect?e.incorrectAnswersCount:e.incorrectAnswersCount+1}}return{questions:r}}),submitCurrencyAnswer:t=>e(e=>{let r=[...e.questions],n=r[e.currentQuestionIndex];if(n){let s=parseFloat(t.replace("$",""))||0;n.userAnswer=s,n.isCorrect=.01>Math.abs(n.answer-s),n.timeSpent=e.settings.timerEnabled?e.settings.timerPerQuestion-e.timeRemaining:0;let i=n.isCorrect?e.currentStreak+1:0,a=Math.max(e.bestStreak,i);return{questions:r,currentStreak:i,bestStreak:a,correctAnswersCount:n.isCorrect?e.correctAnswersCount+1:e.correctAnswersCount,incorrectAnswersCount:n.isCorrect?e.incorrectAnswersCount:e.incorrectAnswersCount+1}}return{questions:r}}),submitTimeAnswer:t=>e(e=>{let r=[...e.questions],n=r[e.currentQuestionIndex];if(n){let s=t.split(":").map(Number),i=0;2===s.length&&(i=n.answer>3600?(60*s[0]+s[1])*60:60*s[0]+s[1]),n.userAnswer=i,n.isCorrect=1>Math.abs(n.answer-i),n.timeSpent=e.settings.timerEnabled?e.settings.timerPerQuestion-e.timeRemaining:0;let a=n.isCorrect?e.currentStreak+1:0,o=Math.max(e.bestStreak,a);return{questions:r,currentStreak:a,bestStreak:o,correctAnswersCount:n.isCorrect?e.correctAnswersCount+1:e.correctAnswersCount,incorrectAnswersCount:n.isCorrect?e.incorrectAnswersCount:e.incorrectAnswersCount+1}}return{questions:r}}),setTimeRemaining:t=>e({timeRemaining:t}),setOverallTimeRemaining:t=>e({overallTimeRemaining:t}),completeQuiz:()=>e({isQuizActive:!1,isQuizCompleted:!0,overallTimerActive:!1}),resetQuiz:()=>e({questions:[],currentQuestionIndex:0,timeRemaining:t().settings.timerEnabled?t().settings.timerPerQuestion:0,isQuizActive:!1,isQuizCompleted:!1,currentStreak:0,correctAnswersCount:0,incorrectAnswersCount:0,quizStartTime:null,overallTimeRemaining:t().settings.overallTimerDuration,overallTimerActive:!1}),retryQuiz:r=>e({questions:r,currentQuestionIndex:0,timeRemaining:t().settings.timerEnabled?t().settings.timerPerQuestion:0,isQuizActive:!1,isQuizCompleted:!1,currentStreak:0,correctAnswersCount:0,incorrectAnswersCount:0,quizStartTime:null,overallTimeRemaining:t().settings.overallTimerDuration,overallTimerActive:!1,_gameRecordSaved:!1}),loadUserPreferences:()=>{let t=i.b.load();t&&e(e=>({settings:{...e.settings,...t.settings}}))},saveUserPreferences:()=>{let e=t();i.b.save({username:e.settings.username,settings:e.settings,lastUpdated:new Date})},saveGameResult:()=>{let r=t();if(!r.isQuizCompleted||0===r.questions.length||t()._gameRecordSaved)return null;e({_gameRecordSaved:!0});let n=r.questions.filter(e=>e.isCorrect).length,s=r.questions.length,l=Math.round(n/s*100),c=r.questions.reduce((e,t)=>e+(t.timeSpent||0),0),u=r.quizStartTime?Math.round((Date.now()-r.quizStartTime)/1e3):c;return(async()=>{try{let e=await (0,a.JE)(r.settings.username);if(!e)try{e=await (0,a.kg)(r.settings.username)}catch(t){if("object"==typeof t&&null!==t&&"message"in t&&"string"==typeof t.message&&t.message.includes("duplicate key value"))e=await (0,a.JE)(r.settings.username);else throw t}await (0,a.s4)({player_id:e.id,game_id:o.uq.ID,score:l,achievement:"",challenge_mode:r.settings.challengeMode||"none",game_duration:u,player_level:r.settings.difficulty,game_settings:r.settings})}catch(e){console.error("Supabase save error:",e)}})(),i.O.save({username:r.settings.username,settings:r.settings,questions:r.questions.map(e=>{var t;return{question:e.question,correctAnswer:e.fractionAnswer||e.answer.toString(),userAnswer:e.userFractionAnswer||(null==(t=e.userAnswer)?void 0:t.toString())||"",isCorrect:e.isCorrect||!1,timeSpent:e.timeSpent||0}}),totalQuestions:s,correctAnswers:n,incorrectAnswers:r.incorrectAnswersCount,score:l,timeSpent:c,quizDuration:u,averageTimePerQuestion:s>0?Math.round(c/s):0})},clearUserData:()=>{i.b.clear(),i.O.clear(),e({settings:l,questions:[],currentQuestionIndex:0,timeRemaining:l.timerEnabled?l.timerPerQuestion:0,isQuizActive:!1,isQuizCompleted:!1,currentStreak:0,bestStreak:0,correctAnswersCount:0,incorrectAnswersCount:0,quizStartTime:null,overallTimeRemaining:l.overallTimerDuration,overallTimerActive:!1})}}))},7488:(e,t,r)=>{r.d(t,{CG:()=>n,cZ:()=>i,uq:()=>s});let n={USERS:"game_players",RECORDS:"game_history",APPS:"game_apps"},s={MATH_QUIZ:"math_quiz",ID:"1a1e558c-2c2f-4dc0-9f92-991821a44e23"},i={USERS:{ID:"id",USERNAME:"username"},RECORDS:{ID:"id",PLAYER_ID:"player_id",SCORE:"score",ACHIEVEMENT:"achievement",GAME_DURATION:"game_duration",PLAYER_LEVEL:"player_level",GAME_SETTINGS:"game_settings"},GAME_APPS:{ID:"id",GAME_SETTINGS:"game_settings"}}},8095:(e,t,r)=>{r.d(t,{s4:()=>o,kg:()=>i,JE:()=>a});let n=(0,r(2354).UU)("https://jtpzzbognaeitsffarcd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp0cHp6Ym9nbmFlaXRzZmZhcmNkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ3ODUzMTQsImV4cCI6MjA3MDM2MTMxNH0.EKnCEKxKKLLs9iWkHdBHdyWeyrQsHa6IU02NTNGatao");var s=r(7488);async function i(e){let{data:t,error:r}=await n.from(s.CG.USERS).insert([{username:e}]).select();if(r)throw r;return null==t?void 0:t[0]}async function a(e){let{data:t,error:r}=await n.from(s.CG.USERS).select("*").eq(s.cZ.USERS.USERNAME,e);if(r)throw r;return t&&t.length>0?t[0]:null}async function o(e){let{player_id:t,game_id:r,score:i,achievement:a,game_duration:o,challenge_mode:l,player_level:c,game_settings:u}=e,{data:m,error:d}=await n.from(s.CG.RECORDS).insert([{player_id:t,game_id:r,score:i,achievement:a,game_duration:o,challenge_mode:l,player_level:c,game_settings:u}]).select();if(d)throw d;return null==m?void 0:m[0]}}}]);