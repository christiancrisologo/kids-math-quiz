(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{816:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>a,eu:()=>s});let a=(e,t)=>{if(!t||t.sounds)try{let t=new(window.AudioContext||window.webkitAudioContext),r=function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sine",s=t.createOscillator(),i=t.createGain();s.connect(i),i.connect(t.destination),s.frequency.setValueAtTime(e,t.currentTime),s.type=a,i.gain.setValueAtTime(.1,t.currentTime),i.gain.exponentialRampToValueAtTime(.01,t.currentTime+r),s.start(),s.stop(t.currentTime+r)};switch(e){case"correct":r(523,.15),setTimeout(()=>r(659,.15),100),setTimeout(()=>r(784,.2),200);break;case"incorrect":r(400,.2,"triangle"),setTimeout(()=>r(350,.3,"triangle"),150);break;case"button":r(800,.1,"square");break;case"completion":r(523,.15),setTimeout(()=>r(659,.15),100),setTimeout(()=>r(784,.15),200),setTimeout(()=>r(1047,.3),300)}}catch(e){console.warn("Failed to play sound:",e)}},s=(e,t)=>{if((!t||t.sounds)&&"vibrate"in navigator)try{navigator.vibrate(e)}catch(e){console.warn("Failed to vibrate:",e)}}},5056:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(5155),s=r(2115),i=r(5695),n=r(6066),o=r(2745),l=r(4223),c=r(2325),d=r(987);let m=e=>{let{isVisible:t,onComplete:r,intensity:i="medium"}=e,{settings:n}=(0,c.e)(),[o,l]=(0,s.useState)([]);return((0,s.useEffect)(()=>{if(!t)return;if(!(0,d.NM)(n)){null==r||r();return}let e=["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#f0932b","#eb4d4b","#6c5ce7"],a=["⭐","\uD83C\uDF89","\uD83C\uDF1F","✨","\uD83C\uDF8A","\uD83C\uDF88","\uD83C\uDF81","\uD83C\uDFC6"];l(Array.from({length:(()=>{switch(i){case"low":return 10;case"medium":default:return 20;case"high":return 40}})()},(t,r)=>({id:r,x:Math.random()*window.innerWidth,y:-10,vx:(Math.random()-.5)*4,vy:3*Math.random()+2,color:e[Math.floor(Math.random()*e.length)],emoji:a[Math.floor(Math.random()*a.length)]})));let s=(()=>{switch(i){case"low":return 2500;case"medium":default:return 3e3;case"high":return 4e3}})(),o=setInterval(()=>{l(e=>e.map(e=>({...e,x:e.x+e.vx,y:e.y+e.vy,vy:e.vy+.1})).filter(e=>e.y<window.innerHeight+10))},16),c=setTimeout(()=>{clearInterval(o),l([]),null==r||r()},s);return()=>{clearInterval(o),clearTimeout(c)}},[t,r,i,n]),t&&(0,d.NM)(n))?(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none z-50",children:o.map(e=>(0,a.jsx)("div",{className:"absolute text-2xl ".concat((0,d.HP)("animate-bounce-gentle",n)),style:{left:"".concat(e.x,"px"),top:"".concat(e.y,"px"),transform:"translate(-50%, -50%)",color:e.color},children:e.emoji},e.id))}):null};var u=r(816),x=r(8688);function h(){var e;let t=(0,i.useRouter)(),r=(0,o.al)(),{settings:h}=(0,c.e)(),{settings:g,questions:p,resetQuiz:f,bestStreak:b,retryQuiz:v,saveGameResult:y}=(0,n.e)(),[j,w]=(0,s.useState)(!1),[k,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(0===p.length)t.push("/");else{setTimeout(()=>(0,u.Ak)("completion",h),500);try{y()}catch(e){console.error("Failed to save game result:",e)}setTimeout(()=>w(!0),800)}},[p.length,t,y,h]),(0,s.useEffect)(()=>{Math.round(p.filter(e=>e.isCorrect).length/p.length*100)>=90&&setTimeout(()=>N(!0),2500)},[p]);let C=p.filter(e=>e.isCorrect).length,T=p.length,A=Math.round(C/T*100),D=((e,t,r,a)=>{var s,i;let n=Math.round(e/t*100);return[{id:"first_perfect",title:"Perfect Score!",description:"Got 100% on a quiz",emoji:"\uD83C\uDFC6",unlocked:100===n},{id:"streak_master",title:"Streak Master",description:"Got 5 answers correct in a row",emoji:"\uD83D\uDD25",unlocked:r>=5},{id:"math_ninja",title:"Math Ninja",description:"Completed a hard difficulty quiz",emoji:"\uD83E\uDD77",unlocked:"hard"===a.difficulty},{id:"speed_demon",title:"Speed Demon",description:"Completed quiz with 5 seconds per question",emoji:"⚡",unlocked:a.timerPerQuestion<=5},{id:"multi_master",title:"Multi-Master",description:"Selected 3+ math operations",emoji:"\uD83C\uDFAF",unlocked:(null==(s=a.mathOperations)?void 0:s.length)>=3},{id:"fraction_hero",title:"Fraction Hero",description:"Completed a fraction quiz",emoji:"\uD83E\uDDEE",unlocked:null==(i=a.numberTypes)?void 0:i.includes("fractions")},{id:"high_achiever",title:"High Achiever",description:"Scored 90% or higher",emoji:"⭐",unlocked:n>=90},{id:"persistent_learner",title:"Persistent Learner",description:"Completed a 10+ question quiz",emoji:"\uD83D\uDCDA",unlocked:t>=10}].filter(e=>e.unlocked)})(C,T,b,g),M=(e=>{let t=["You're like a calculator, but way cooler! \uD83E\uDDEE✨","Math wizard in training! Your powers are growing! \uD83E\uDDD9‍♂️\uD83D\uDCDA","Houston, we have a math genius! \uD83D\uDE80\uD83C\uDF1F","You're making numbers dance! \uD83D\uDC83\uD83D\uDD22","Math superhero alert! \uD83E\uDDB8‍♂️\uD83D\uDD25","You're sharper than a pencil! ✏️⚡","Number ninja in action! \uD83E\uDD77\uD83D\uDD22","You're solving problems faster than a cheetah! \uD83D\uDC06\uD83D\uDCA8","Math magician extraordinaire! \uD83C\uDFA9✨","You're cooking up some serious math skills! \uD83D\uDC68‍\uD83C\uDF73\uD83D\uDD25"],r=t[Math.floor(Math.random()*t.length)];return e>=90?{emoji:"�",message:r}:e>=80?{emoji:"\uD83C\uDF89",message:r}:e>=70?{emoji:"\uD83D\uDC4F",message:r}:e>=60?{emoji:"\uD83D\uDC4D",message:r}:{emoji:"\uD83D\uDCAA",message:r}})(A);return 0===p.length?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-600 dark:from-emerald-900 dark:via-blue-800 dark:to-violet-900 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl text-center ".concat(r?"p-6 max-w-sm":"p-8 max-w-md"),children:[(0,a.jsx)("div",{className:"".concat(d.R7.spin(h)," rounded-full h-16 w-16 border-b-2 border-purple-500 dark:border-purple-400 mx-auto")}),(0,a.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading results..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-300 via-green-400 to-blue-500 dark:from-amber-900 dark:via-emerald-800 dark:to-blue-900",children:[(0,a.jsx)("div",{className:"".concat(r?"p-4":"flex items-center justify-center p-4 min-h-screen"),children:(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full ".concat(r?"max-w-md mx-auto":"max-w-4xl"," ").concat(r?"p-6":"p-8"," relative"),children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"font-bold text-gray-800 dark:text-gray-200 mb-2 ".concat(r?"text-2xl":"text-4xl"),children:"\uD83C\uDFAF Matherific Results!"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 ".concat(r?"text-sm":"text-base"),children:M.message})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-yellow-100 via-pink-100 to-purple-100 dark:from-yellow-900/30 dark:via-pink-900/30 dark:to-purple-900/30 rounded-2xl text-center mb-8 ".concat(d.R7.float(h)," border-4 border-gradient-to-r from-rainbow-200 to-rainbow-400 ").concat(r?"p-6":"p-8"),children:[(0,a.jsx)("div",{className:"mb-4 ".concat(r?"text-4xl":"text-6xl"," ").concat(d.R7.bounceGentle(h)),children:M.emoji}),(0,a.jsxs)("div",{className:"font-bold text-gray-800 dark:text-gray-200 mb-2 ".concat(r?"text-2xl":"text-4xl"," ").concat(d.R7.shimmer(h)),children:[C," / ",T]}),(0,a.jsxs)("div",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-3 ".concat(r?"text-xl":"text-2xl"),children:[A,"% Correct"]}),(0,a.jsxs)("div",{className:"text-gray-700 dark:text-gray-300 ".concat(r?"text-base":"text-lg"),children:["Great job, ",g.username,"! \uD83C\uDF89"]}),b>0&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 text-white px-4 py-2 rounded-full inline-flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDD25"}),(0,a.jsxs)("span",{className:"font-bold",children:["Best Streak: ",b]})]})})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"font-bold text-gray-800 dark:text-gray-200 mb-4 ".concat(r?"text-lg":"text-2xl"),children:"\uD83D\uDCCB Question Review"}),(0,a.jsx)("div",{className:"space-y-3 ".concat(r?"max-h-64":"max-h-96"," overflow-y-auto"),children:p.map((e,t)=>(0,a.jsx)("div",{className:"rounded-lg border-2 ".concat(e.isCorrect?"border-green-300 dark:border-green-600 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20":"border-red-300 dark:border-red-600 bg-gradient-to-r from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20"," ").concat(r?"p-3":"p-4"," ").concat(d.R7.bounceGentle(h)," hover:shadow-lg transition-all duration-200"),style:{animationDelay:"".concat(.1*t,"s")},children:r?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"font-medium text-gray-700 dark:text-gray-300 text-sm",children:["Q",t+1,": ",e.variable&&e.equation?"".concat(e.equation," (").concat(e.variable," = ").concat(e.fractionAnswer||e.answer,")"):"".concat(e.question," = ").concat(e.fractionAnswer||e.answer)]}),(0,a.jsx)("span",{className:"text-xl",children:e.isCorrect?"✅":"❌"})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Your answer: ",void 0!==e.userFractionAnswer?e.userFractionAnswer||"No answer":void 0!==e.userAnswer?-1===e.userAnswer?"No answer":e.userAnswer:"No answer"]}),void 0!==e.timeSpent&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Time: ",e.timeSpent,"s"]})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Q",t+1,": ",e.variable&&e.equation?"".concat(e.equation," (").concat(e.variable," = ").concat(e.fractionAnswer||e.answer,")"):"".concat(e.question," = ").concat(e.fractionAnswer||e.answer)]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Your answer: ",void 0!==e.userFractionAnswer?e.userFractionAnswer||"No answer":void 0!==e.userAnswer?-1===e.userAnswer?"No answer":e.userAnswer:"No answer"]}),(0,a.jsx)("span",{className:"text-2xl",children:e.isCorrect?"✅":"❌"})]})]}),void 0!==e.timeSpent&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Time spent: ",e.timeSpent,"s"]})]})},e.id))})]}),D.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"font-bold text-gray-800 dark:text-gray-200 mb-4 text-center ".concat(r?"text-lg":"text-2xl"),children:"\uD83C\uDFC6 Achievements Unlocked! \uD83C\uDFC6"}),(0,a.jsx)("div",{className:"grid gap-3 ".concat(r?"grid-cols-1":"grid-cols-2"),children:D.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 rounded-lg p-3 text-center border-2 border-yellow-300 dark:border-yellow-600 ".concat(d.R7.bounceGentle(h)),style:{animationDelay:"".concat(.2*t,"s")},children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:e.emoji}),(0,a.jsx)("div",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.description})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl mb-8 ".concat(r?"p-4":"p-6"),children:[(0,a.jsx)("h3",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 ".concat(r?"text-lg":"text-xl"),children:"\uD83D\uDCCB Quiz Settings"}),(0,a.jsxs)("div",{className:"text-gray-600 dark:text-gray-400 ".concat(r?"text-sm":"text-base"),children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Difficulty:"})," ",g.difficulty.charAt(0).toUpperCase()+g.difficulty.slice(1)]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Operations:"})," ",g.mathOperations.map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(", ")]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Number Types:"})," ",(null==(e=g.numberTypes)?void 0:e.map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(", "))||"Integers"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Question Type:"})," ",g.questionType.charAt(0).toUpperCase()+g.questionType.slice(1)]})]})]}),(0,a.jsxs)("div",{className:"space-y-4 ".concat(r?"":"md:grid md:grid-cols-3 md:gap-4 md:space-y-0"),children:[(0,a.jsx)(l.T,{variant:"secondary",size:"lg",fullWidth:!0,onClick:()=>{v((0,x.L)(g.numberOfQuestions,g.difficulty,g.mathOperations,g.questionType,g.numberTypes)),t.push("/quiz")},icon:"\uD83D\uDD04",children:"Try Again"}),(0,a.jsx)(l.T,{variant:"secondary",size:"lg",fullWidth:!0,onClick:()=>t.push("/history"),icon:"\uD83D\uDCCA",children:"View History"}),(0,a.jsx)(l.T,{variant:"primary",size:"lg",fullWidth:!0,onClick:()=>{f(),t.push("/")},icon:"\uD83C\uDFE0",children:"Back to Home"})]})]})}),(0,a.jsx)(m,{isVisible:j,intensity:A>=90?"high":A>=70?"medium":"low",onComplete:()=>w(!1)}),A>=90&&(0,a.jsx)(m,{isVisible:k,intensity:"high",onComplete:()=>N(!1)})]})}},6164:(e,t,r)=>{Promise.resolve().then(r.bind(r,5056))}},e=>{e.O(0,[595,94,558,441,964,358],()=>e(e.s=6164)),_N_E=e.O()}]);